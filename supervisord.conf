[supervisord]
nodaemon=true

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=http://0.0.0.0:9001

[program:crawler_worker]
command=celery -A modules.adapter.infrastructure.celery.crawler_queue.crawler_celery worker -l info -P threads -c 1 -n crawler -Q crawler
process_name=%(program_name)s_%(process_num)02d
numprocs=1
autostart=true
startsecs=1
environment=PYTHONUNBUFFERED=1, FASTAPI_ENV="development", DEV_DATA_LAKE_URL="mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_lake", DEV_DATA_WAREHOUSE_URL="mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_warehouse", DATA_MART_URL="mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_mart", BACKEND_RESULT="db+mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_mart", JWT_SECRET_KEY="hawaii", REDIS_URL="redis://dev-redis-for-captain.g4ilww.ng.0001.apn2.cache.amazonaws.com:6379", SENTRY_KEY="https://bc36dd0d127e450c99d5702091bb398f@o876493.ingest.sentry.io/5826081", AWS_ACCESS_KEY="AKIATBBH6H6PNXVM54ND", AWS_SECRET_ACCESS_KEY="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", AWS_REGION_NAME="ap-northeast-2", TOADHOME_CLOUD_FRONT_DOMAIN="d3m4jcu4epmsjg.cloudfront.net", SLACK_TOKEN="xoxb-1811487173312-2075478573287-JtTJbgy3fAboqlwkLeas9R1o", SLACK_CHANNEL="#batch-log-dev", TZ="Asia/Seoul"


[program:etl_worker]
command=celery -A modules.adapter.infrastructure.celery.etl_queue.etl_celery worker -l info -P threads -c 1 -n etl -Q etl
process_name=%(program_name)s_%(process_num)02d
numprocs=1
autostart=true
startsecs=1
environment=PYTHONUNBUFFERED=1, FASTAPI_ENV="development", DEV_DATA_LAKE_URL="mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_lake", DEV_DATA_WAREHOUSE_URL="mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_warehouse", DATA_MART_URL="mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_mart", BACKEND_RESULT="db+mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_mart", JWT_SECRET_KEY="hawaii", REDIS_URL="redis://dev-redis-for-captain.g4ilww.ng.0001.apn2.cache.amazonaws.com:6379", SENTRY_KEY="https://bc36dd0d127e450c99d5702091bb398f@o876493.ingest.sentry.io/5826081", AWS_ACCESS_KEY="AKIATBBH6H6PNXVM54ND", AWS_SECRET_ACCESS_KEY="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", AWS_REGION_NAME="ap-northeast-2", TOADHOME_CLOUD_FRONT_DOMAIN="d3m4jcu4epmsjg.cloudfront.net", SLACK_TOKEN="xoxb-1811487173312-2075478573287-JtTJbgy3fAboqlwkLeas9R1o", SLACK_CHANNEL="#batch-log-dev", TZ="Asia/Seoul"

[program:beat_scheduler]
command=celery -A modules.adapter.infrastructure.celery.crawler_queue.crawler_celery beat -l info
process_name=%(program_name)s_%(process_num)02d
numprocs=1
autostart=true
startsecs=1
environment=PYTHONUNBUFFERED=1, FASTAPI_ENV="development", DEV_DATA_LAKE_URL="mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_lake", DEV_DATA_WAREHOUSE_URL="mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_warehouse", DATA_MART_URL="mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_mart", BACKEND_RESULT="db+mysql+pymysql://apartalk_admin:!wjstngks117@dev-apartalk-dm-cluster.cluster-cmib56uiilha.ap-northeast-2.rds.amazonaws.com:3306/apartalk_data_mart", JWT_SECRET_KEY="hawaii", REDIS_URL="redis://dev-redis-for-captain.g4ilww.ng.0001.apn2.cache.amazonaws.com:6379", SENTRY_KEY="https://bc36dd0d127e450c99d5702091bb398f@o876493.ingest.sentry.io/5826081", AWS_ACCESS_KEY="AKIATBBH6H6PNXVM54ND", AWS_SECRET_ACCESS_KEY="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", AWS_REGION_NAME="ap-northeast-2", TOADHOME_CLOUD_FRONT_DOMAIN="d3m4jcu4epmsjg.cloudfront.net", SLACK_TOKEN="xoxb-1811487173312-2075478573287-JtTJbgy3fAboqlwkLeas9R1o", SLACK_CHANNEL="#batch-log-dev", TZ="Asia/Seoul"