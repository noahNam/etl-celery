[supervisord]
nodaemon=true

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=http://0.0.0.0:9001

[program:crawler_worker]
directory=/home/ubuntu/antgirl
stdout_logfile=/home/ubuntu/antgirl/log/crawler
redirect_stderr=true
command=celery -A modules.adapter.infrastructure.celery.crawler_queue.crawler_celery worker -l info -P threads -c 1 -n crawler -Q crawler
process_name=%(program_name)s_%(process_num)02d
numprocs=1
autostart=true
autorestart=true
startsecs=1
environment = PYTHONUNBUFFERED=1

[program:etl_worker]
directory=/home/ubuntu/antgirl
stdout_logfile=/home/ubuntu/antgirl/log/etl
redirect_stderr=true
command=celery -A modules.adapter.infrastructure.celery.etl_queue.etl_celery worker -l info -P threads -c 1 -n etl -Q etl
process_name=%(program_name)s_%(process_num)02d
numprocs=1
autostart=true
autorestart=true
startsecs=1
environment = PYTHONUNBUFFERED=1

[program:beat_scheduler]
directory=/home/ubuntu/antgirl
stdout_logfile=/home/ubuntu/antgirl/log/beat
redirect_stderr=true
command=celery -A modules.adapter.infrastructure.celery.crawler_queue.crawler_celery beat -l info --auto-interval=10
process_name=%(program_name)s_%(process_num)02d
numprocs=1
autostart=true
autorestart=true
startsecs=1
environment = PYTHONUNBUFFERED=1